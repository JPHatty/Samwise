# ============================================================
# samwise Environment Configuration Template
# ============================================================
# PURPOSE: Define all environment variables required by services
# USAGE: Copy this file to .env and fill in your actual values
# SECURITY: NEVER commit .env files to version control
# VALIDATION: All variables must be non-empty before service start

# ============================================================
# GENERAL SETTINGS
# ============================================================
PROJECT_NAME=samwise
ENVIRONMENT=development
LOG_LEVEL=info

# ============================================================
# TRAEFIK - Reverse Proxy & Load Balancer
# ============================================================
# Enable/disable insecure dashboard access (development only)
TRAEFIK_DASHBOARD_INSECURE=false
# Log level: TRACE, DEBUG, INFO, WARN, ERROR, FATAL, PANIC
TRAEFIK_LOG_LEVEL=INFO

# ============================================================
# N8N - Workflow Automation Platform
# ============================================================
# REQUIRED: 32-character minimum encryption key for data at rest
N8N_ENCRYPTION_KEY=
# Public URL where n8n is accessible (for webhooks)
N8N_WEBHOOK_URL=https://n8n.local
# Base URL for editor access
N8N_EDITOR_BASE_URL=https://n8n.local:5678
# Basic authentication
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=
# Host configuration
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
# Logging and metrics
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console
N8N_METRICS=false

# ============================================================
# N8N MCP SERVERS - Model Context Protocol
# ============================================================
# n8n-mcp service
N8N_MCP_PORT=3000
MCP_LOG_LEVEL=info

# n8n-workflows-mcp service
N8N_WORKFLOWS_MCP_PORT=3001
# API key for n8n workflow discovery
N8N_API_KEY=
# Internal API URL (auto-resolved if empty)
N8N_API_URL=http://n8n:5678

# ============================================================
# REDIS - State Management & Cache
# ============================================================
# REQUIRED: Password for Redis authentication
REDIS_PASSWORD=

# ============================================================
# POSTGRESQL - Primary Database (with pgvector + jsonb)
# ============================================================
# REQUIRED: Database credentials
POSTGRES_USER=samwise
POSTGRES_PASSWORD=
POSTGRES_DB=samwise
# Optional: External database connection
POSTGRES_HOST=
POSTGRES_PORT=5432
POSTGRES_SSL_MODE=disable
# Connection pool
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_POOL_MIN=5

# ============================================================
# QDRANT - Vector Database
# ============================================================
# Log level: DEBUG, INFO, WARN, ERROR
QDRANT_LOG_LEVEL=INFO
# API key (if using Qdrant Cloud)
QDRANT_API_KEY=
# Qdrant Cloud URL (if using managed service)
QDRANT_URL=

# ============================================================
# MEILISEARCH - Full-Text Search Engine
# ============================================================
# REQUIRED: Master key for admin operations (min 32 characters)
MEILISEARCH_MASTER_KEY=
# Environment: development or production
MEILISEARCH_ENV=development
# Disable anonymous telemetry
MEILISEARCH_NO_ANALYTICS=true
# Log level: ERROR, WARN, INFO, DEBUG, TRACE
MEILISEARCH_LOG_LEVEL=INFO

# ============================================================
# MINIO - Object Storage (S3-Compatible)
# ============================================================
# Root user credentials (min 3 characters)
MINIO_ROOT_USER=minioadmin
# REQUIRED: Root password (min 8 characters)
MINIO_ROOT_PASSWORD=
# Storage region
MINIO_REGION=us-east-1
# Enable/disable web console
MINIO_BROWSER=on

# ============================================================
# GRAFANA - Metrics Visualization Dashboard
# ============================================================
# Admin credentials
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=
# Public URL
GRAFANA_ROOT_URL=http://localhost:3001
# Log level: critical, error, warning, info, debug
GRAFANA_LOG_LEVEL=info
# Comma-separated plugins to install
GRAFANA_PLUGINS=

# ============================================================
# PROMETHEUS - Metrics Collection & Storage
# ============================================================
# Data retention period (e.g., 15d, 30d, 90d)
PROMETHEUS_RETENTION=15d
# Log level: debug, info, warn, error
PROMETHEUS_LOG_LEVEL=info

# ============================================================
# LOKI - Log Aggregation & Query
# ============================================================
# Log level: debug, info, warn, error
LOKI_LOG_LEVEL=info

# ============================================================
# TAILSCALE - Sidecar VPN
# ============================================================
# REQUIRED: Auth key from https://login.tailscale.com/admin/settings/keys
# Format: tskey-<key>
TS_AUTHKEY=
# Additional CLI arguments
TS_EXTRA_ARGS=--advertise-exit-node
# Log level
TS_LOG_LEVEL=info

# ============================================================
# DESKTOP-COMMANDER - Local Execution Interface
# ============================================================
# Port for the commander service
COMMANDER_PORT=3002
# Log level
COMMANDER_LOG_LEVEL=info

# ============================================================
# CLOUD PROVIDERS (Optional - for external integrations)
# ============================================================

# Supabase
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=

# GitHub
GITHUB_TOKEN=
GITHUB_WEBHOOK_SECRET=

# Cloudflare
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ZONE_ID=

# Northflank
NORTHFLANK_API_TOKEN=

# Fly.io
FLY_API_TOKEN=

# Koyeb
KOYEB_API_TOKEN=

# ============================================================
# DOCKER COMPOSE PROFILES
# ============================================================
# Activation examples:
#   docker compose --profile core up
#   docker compose --profile workflows --profile state up
#   docker compose --profile monitoring up
#   docker compose --profile database --profile vector up
#   docker compose --profile vpn up
#
# Available profiles:
#   - core: traefik, n8n, redis, minio
#   - workflows: n8n, n8n-mcp, n8n-workflows-mcp
#   - mcp: n8n-mcp, n8n-workflows-mcp
#   - state: redis
#   - database: postgresql, qdrant, meilisearch
#   - vector: qdrant
#   - search: meilisearch
#   - storage: minio
#   - observability: grafana, prometheus, loki
#   - monitoring: grafana, prometheus, loki
#   - ingress: traefik
#   - networking: tailscale
#   - vpn: tailscale
#   - utilities: desktop-commander
#   - local: desktop-commander
